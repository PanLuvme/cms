{
	"info": {
		"_postman_id": "72906861-d8be-490a-91b0-17cc0c04c86c",
		"name": "BCMS",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Templates",
			"item": [
				{
					"name": "API Key",
					"item": [
						{
							"name": "Get By ID",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{API_ORIGIN}}/template/TEMPLATE_ID?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"TEMPLATE_ID"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7c661bd7-e203-4446-82c1-943b30011cfd",
								"type": "text/javascript",
								"exec": [
									"function getBody() {",
									"  let body = {};",
									"  if (pm.request.body && pm.request.body.raw && pm.request.body.raw !== \"\") {",
									"    body = JSON.parse(pm.request.body.raw);",
									"  }",
									"  return body;",
									"}",
									"",
									"function sign(config) {",
									"    const data = {",
									"      key: config.key.id,",
									"      timestamp: Date.now(),",
									"      nonce: CryptoJS.lib.WordArray.random(6).toString(),",
									"      signature: '',",
									"    };",
									"    let payloadAsString = '';",
									"    if (typeof config.payload === 'object') {",
									"      payloadAsString = Buffer.from(JSON.stringify(config.payload)).toString('base64');",
									"    } else {",
									"      payloadAsString = '' + config.payload;",
									"    }",
									"    data.signature = CryptoJS.HmacSHA256(data.nonce + data.timestamp + data.key + payloadAsString, config.key.secret).toString();",
									"    return data;",
									"}",
									"",
									"const query = sign({",
									"    key: {",
									"        id: pm.variables.get('API_KEY'), ",
									"        secret: pm.variables.get('API_SECRET'),",
									"    },",
									"    payload: getBody(),",
									"});",
									"pm.environment.set(\"key\", query.key);",
									"pm.environment.set(\"nonce\", query.nonce);",
									"pm.environment.set(\"timestamp\", query.timestamp);",
									"pm.environment.set(\"signature\", query.signature);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "acf35394-5dde-4e19-92d5-408dadcdbff5",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Entries",
			"item": [
				{
					"name": "API Key",
					"item": [
						{
							"name": "Get All",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{API_ORIGIN}}/template/____TEMPLATE_ID____/entry/all?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"____TEMPLATE_ID____",
										"entry",
										"all"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get By ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{API_ORIGIN}}/template/____TEMPLATE_ID____/entry/____ENTRY_ID____?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"____TEMPLATE_ID____",
										"entry",
										"____ENTRY_ID____"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Add New Entry",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{API_ORIGIN}}/template/____TEMPLATE_ID____/entry?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"____TEMPLATE_ID____",
										"entry"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update Entry",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{API_ORIGIN}}/template/____TEMPLATE_ID____/entry?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"____TEMPLATE_ID____",
										"entry"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Entry",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{API_ORIGIN}}/template/____TEMPLATE_ID____/entry/____ENTRY_ID____?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"template",
										"____TEMPLATE_ID____",
										"entry",
										"____ENTRY_ID____"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e5735ae3-d45e-4bb4-9a45-ea0cde3dd7a1",
								"type": "text/javascript",
								"exec": [
									"function getBody() {",
									"  let body = {};",
									"  if (pm.request.body && pm.request.body.raw && pm.request.body.raw !== \"\") {",
									"    body = JSON.parse(pm.request.body.raw);",
									"  }",
									"  return body;",
									"}",
									"",
									"function sign(config) {",
									"    const data = {",
									"      key: config.key.id,",
									"      timestamp: Date.now(),",
									"      nonce: CryptoJS.lib.WordArray.random(6).toString(),",
									"      signature: '',",
									"    };",
									"    let payloadAsString = '';",
									"    if (typeof config.payload === 'object') {",
									"      payloadAsString = Buffer.from(JSON.stringify(config.payload)).toString('base64');",
									"    } else {",
									"      payloadAsString = '' + config.payload;",
									"    }",
									"    data.signature = CryptoJS.HmacSHA256(data.nonce + data.timestamp + data.key + payloadAsString, config.key.secret).toString();",
									"    return data;",
									"}",
									"",
									"const query = sign({",
									"    key: {",
									"        id: pm.variables.get('API_KEY'), ",
									"        secret: pm.variables.get('API_SECRET'),",
									"    },",
									"    payload: getBody(),",
									"});",
									"pm.environment.set(\"key\", query.key);",
									"pm.environment.set(\"nonce\", query.nonce);",
									"pm.environment.set(\"timestamp\", query.timestamp);",
									"pm.environment.set(\"signature\", query.signature);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3d8a27e1-e0e4-482b-ab7c-48aae27b47f3",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Auth",
			"item": [],
			"protocolProfileBehavior": {}
		},
		{
			"name": "User",
			"item": [],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Functions",
			"item": [
				{
					"name": "API Key",
					"item": [
						{
							"name": "Execute",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{API_ORIGIN}}/function/test?key={{key}}&nonce={{nonce}}&timestamp={{timestamp}}&signature={{signature}}",
									"host": [
										"{{API_ORIGIN}}"
									],
									"path": [
										"function",
										"test"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "nonce",
											"value": "{{nonce}}"
										},
										{
											"key": "timestamp",
											"value": "{{timestamp}}"
										},
										{
											"key": "signature",
											"value": "{{signature}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "0f211a36-74b2-4198-a0ec-e8b85789a947",
								"type": "text/javascript",
								"exec": [
									"function getBody() {",
									"  let body = {};",
									"  if (pm.request.body && pm.request.body.raw && pm.request.body.raw !== \"\") {",
									"    body = JSON.parse(pm.request.body.raw);",
									"  }",
									"  return body;",
									"}",
									"",
									"function sign(config) {",
									"    const data = {",
									"      key: config.key.id,",
									"      timestamp: Date.now(),",
									"      nonce: CryptoJS.lib.WordArray.random(6).toString(),",
									"      signature: '',",
									"    };",
									"    let payloadAsString = '';",
									"    if (typeof config.payload === 'object') {",
									"      payloadAsString = Buffer.from(JSON.stringify(config.payload)).toString('base64');",
									"    } else {",
									"      payloadAsString = '' + config.payload;",
									"    }",
									"    data.signature = CryptoJS.HmacSHA256(data.nonce + data.timestamp + data.key + payloadAsString, config.key.secret).toString();",
									"    return data;",
									"}",
									"",
									"const query = sign({",
									"    key: {",
									"        id: pm.variables.get('API_KEY'), ",
									"        secret: pm.variables.get('API_SECRET'),",
									"    },",
									"    payload: getBody(),",
									"});",
									"pm.environment.set(\"key\", query.key);",
									"pm.environment.set(\"nonce\", query.nonce);",
									"pm.environment.set(\"timestamp\", query.timestamp);",
									"pm.environment.set(\"signature\", query.signature);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "45d3a8ed-9f29-409b-b54b-71ad74145f90",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Groups",
			"item": [],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Languages",
			"item": [],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Media",
			"item": [],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Widgets",
			"item": [],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "d4e27433-f36b-404e-b641-ae11b6a1d7cc",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "ac8209b6-42bb-47be-a37b-5ccc9afdc3a7",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "dd67411a-cbde-4936-89ee-340d3a559ff6",
			"key": "API_ORIGIN",
			"value": "http://localhost:1280",
			"type": "string"
		},
		{
			"id": "241eb461-8020-4726-99fa-3820726b58ae",
			"key": "API_KEY",
			"value": "my_api_key",
			"type": "string"
		},
		{
			"id": "3697a780-753f-47cc-ba2b-7c4668afed59",
			"key": "API_SECRET",
			"value": "my_api_secret",
			"type": "string"
		},
		{
			"id": "60037279-1d49-4cd9-bf61-f4cd0ef7561b",
			"key": "ACCESS_TOKEN",
			"value": "my_access_token",
			"type": "string"
		},
		{
			"id": "dc20e358-b860-4d43-a845-c5eb3dcba46b",
			"key": "REFRESH_TOKEN",
			"value": "my_refresh_token",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}